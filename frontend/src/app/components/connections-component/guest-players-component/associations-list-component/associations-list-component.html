
@if(!expandedAssociationsList) {
  <div class="cursor-pointer flex py-4 justify-center" (click)="onExpandAssociationsListChange()">
    <img ngSrc="assets/ChevronDown.png" alt="Plus Sign Icon" width="40" height="40">
    <h3 class="text-2xl font-bold  text-brand4 pt-1">Confirmed Associations</h3>
  </div>
}

@if(expandedAssociationsList) {

  <div class="cursor-pointer flex py-4 justify-center" (click)="onExpandAssociationsListChange()">
    <img ngSrc="assets/ChevronUp.png" alt="Plus Sign Icon" width="40" height="40">
    <h3 class="text-2xl font-bold  text-brand4 pt-1">Confirmed Associations</h3>
  </div>

  @if((associations?.length ?? 0) > 0) {

    <section>

      <div class="flex flex-col mt-4">
        <input class="p-2  h-10 border-2 rounded-md border-t-brand5 border-r-brand4 border-b-brand3 border-l-brand2 text-gray-700  focus:border-brand4 focus:ring-2 focus:ring-brand1 focus:outline-none w-full max-w-lg"
               type="text" placeholder="Enter Email or Name" #searchAssociationBox id="associationSearchBox">
        <label class="pt-2 block text-sm font-medium text-gray-700" for="associationSearchBox">Association Name or Email</label>
      </div>

      <div class="flex space-x-4">
        <button class=" bg-brand5 text-white font-semibold my-4 py-2 px-4 rounded-md hover:bg-brand4 focus:outline-none focus:ring-2 focus:ring-brand2 active:bg-brand3 w-full max-w-lg"
                (click)="triggerAssociationLookup(searchAssociationBox.value)">Search Associations</button>

        <button class=" bg-brand5 text-white font-semibold my-4 py-2 px-4 rounded-md hover:bg-brand4 focus:outline-none focus:ring-2 focus:ring-brand2 active:bg-brand3 w-full max-w-lg"
                (click)="triggerFilterClear()">Clear Search Filter</button>

      </div>
    </section>
  }

  @if((filteredAssociations?.length ?? 0) > 0) {
  <table class="mt-2 mb-4 rounded-lg border-2 border-t-brand5 border-r-brand4 border-b-brand3 border-l-brand2  shadow-md table-fixed space-y-4 w-full  mx-0">

    <colgroup>
      <col class="w-auto">
      <col class="w-[150px]">
    </colgroup>

    <thead class="bg-brand1">
    <tr>
      <th class="table-auto border-collapse border-2 border-brand4  px-4 py-2 text-white">Player Name</th>
      <th class="border-collapse border-2 border-brand4 max-w-[150px]"></th>

    </tr>
    </thead>

    <tbody>

      @for(filteredAssociation of filteredAssociations; track filteredAssociation.id) {
        <tr>
          <td class="border-2 border-brand4 px-4 bg-white text-brand4 truncate">{{filteredAssociation.firstName + " " +  filteredAssociation.lastName + " | " + filteredAssociation.identifierEmail}}</td>

          <td class="border-2 border-brand4 px-4 bg-white max-w-[100px]">

            <button class="bg-brand5 text-white font-semibold my-1 py-1 px-4 rounded-md hover:bg-brand4 focus:outline-none focus:ring-2 focus:ring-brand2 active:bg-brand3 w-full max-w-lg"  (click)="triggerRemove(filteredAssociation.id)"  id={{filteredAssociation.id}}>Remove</button>

          </td>
        </tr>
      }
    </tbody>

  </table>
  }
}
