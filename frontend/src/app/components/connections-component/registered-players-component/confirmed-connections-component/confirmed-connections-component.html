<section class="rounded-lg border-2 border-t-brand5 border-r-brand4 border-b-brand3 border-l-brand2 bg-white
mt-6 px-6 shadow-md w-10/12  mx-auto navBar:w-full">


  @if(!expandedConnectionsList) {
    <div class="cursor-pointer flex py-4 justify-center" (click)="onExpandConnectionsListChange()">
      <img ngSrc="assets/ChevronDown.png" alt="Plus Sign Icon" width="40" height="40">
      <h3 class="text-2xl font-bold  text-brand4 pt-1">Confirmed Connections</h3>
    </div>
  }

  @if(expandedConnectionsList) {

    <div class="cursor-pointer flex py-4 justify-center" (click)="onExpandConnectionsListChange()">
      <img ngSrc="assets/ChevronUp.png" alt="Plus Sign Icon" width="40" height="40">
      <h3 class="text-2xl font-bold  text-brand4 pt-1">Confirmed Connections</h3>
    </div>

  @if (connections.length > 0) {

    <section>

      <div class="flex flex-col mt-4">
        <input class="p-2  h-10 border-2 rounded-md border-t-brand5 border-r-brand4 border-b-brand3 border-l-brand2 text-gray-700  focus:border-brand4 focus:ring-2 focus:ring-brand1 focus:outline-none w-full max-w-lg"
               type="text" placeholder="Enter Email, Name, or Display Name" #searchConnectionBox id="connectionSearchBox">
        <label class="pt-2 block text-sm font-medium text-gray-700" for="connectionSearchBox">Connection Name, Email, or Display Name</label>
      </div>

      <div class="flex space-x-4">
        <button class=" bg-brand5 text-white font-semibold my-4 py-2 px-4 rounded-md hover:bg-brand4 focus:outline-none focus:ring-2 focus:ring-brand2 active:bg-brand3 w-full max-w-lg"
                (click)="triggerConnectionLookup(searchConnectionBox.value)">Search Connections</button>

        <button class=" bg-brand5 text-white font-semibold my-4 py-2 px-4 rounded-md hover:bg-brand4 focus:outline-none focus:ring-2 focus:ring-brand2 active:bg-brand3 w-full max-w-lg"
                (click)="triggerFilterClear()">Clear Search Filter</button>

      </div>
    </section>

  }

    @if((filteredConnections?.length ?? 0) > 0) {
    <table class="mt-2 mb-4 rounded-lg border-2 border-t-brand5 border-r-brand4 border-b-brand3 border-l-brand2  shadow-md table-fixed space-y-4 w-full  mx-0">

      <colgroup>
        <col class="w-auto">
        <col class="w-[150px]">
      </colgroup>

      <thead class="bg-brand1">
      <tr>
        <th class="table-auto border-collapse border-2 border-brand4  px-4 py-2 text-white">Player Name</th>
        <th class="border-collapse border-2 border-brand4 max-w-[150px]"></th>

      </tr>
      </thead>

      <tbody>

        @for(filteredConnection of filteredConnections; track filteredConnection.id) {
          <tr>
          <td class="border-2 border-brand4 px-4 bg-white text-brand4 truncate">{{ filteredConnection.firstName +  " " + filteredConnection.lastName +  " | " + filteredConnection.displayName + " | " + filteredConnection.loginEmail}}</td>

          <td class="border-2 border-brand4 px-4 bg-white max-w-[100px]">

              <button class=" bg-brand5 text-white font-semibold my-1 py-1 px-4 rounded-md hover:bg-brand4 focus:outline-none focus:ring-2 focus:ring-brand2 active:bg-brand3 w-full max-w-lg"  (click)="triggerRemove(filteredConnection.id)"  id="{{ 'remove' + filteredConnection.id}}">Remove</button>
              <button class=" bg-brand5 text-white font-semibold my-1 py-1 px-4 rounded-md hover:bg-brand4 focus:outline-none focus:ring-2 focus:ring-brand2 active:bg-brand3 w-full max-w-lg"  (click)="triggerBlock(filteredConnection.id)"  id="{{ 'remove' + 'block' + filteredConnection.id}}">Block</button>

          </td>
          </tr>
        }
      </tbody>

    </table>
    }
  }



